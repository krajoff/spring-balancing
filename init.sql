-- Создаем таблицу пользователей USERS и заполняем
create TABLE IF NOT EXISTS users (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    EMAIL VARCHAR(255),
    USERNAME VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    PRIORITY INTEGER DEFAULT 1,
    ROLE VARCHAR(255) CHECK (ROLE IN ('ADMIN','USER')) DEFAULT 'USER',
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into users (EMAIL, USERNAME, PASSWORD) values
    ('iioz@ya.ru', 'Nikolay',
    '$2a$12$SQ./CdZ8r.pV3WmPSjv3x.44//hq5/RM9eRxbULA4daANkit0jOrK'),
    ('pavel@mail.com', 'Pavel',
    '$2a$12$SQ./CdZ8r.pV3WmPSjv3x.44//hq5/RM9eRxbULA4daANkit0jOrK'),
    ('nikita@mail.com', 'Nikita',
    '$2a$12$SQ./CdZ8r.pV3WmPSjv3x.44//hq5/RM9eRxbULA4daANkit0jOrK');

-- Создаем таблицу станций STATIONS и заполняем
create TABLE IF NOT EXISTS stations (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR(50),
    USER_ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into stations (ID, NAME, USER_ID) values
    (1, 'Туполанг ГЭС', 1),
    (2, 'Воткиснкая ГЭС', 1),
    (3, 'Волжская ГЭС', 1),
    (4, 'Богучанская ГЭС', 1),
    (5, 'Модельный агрегат', 1),
    (6, 'Нижегородская ГЭС', 1);

-- Создаем таблицу агрегатов UNITS и заполняем
create TABLE IF NOT EXISTS units (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    UNIT_NUMBER INTEGER DEFAULT 1,
    TYPE VARCHAR(50) NOT NULL DEFAULT 'Без названия',
    WEIGHT_PRECISION INTEGER DEFAULT 0,
    WEIGHT_UNIT_MEASURE VARCHAR(5) DEFAULT 'кг',
    VIBRATION_PRECISION INTEGER DEFAULT 0,
    VIBRATION_UNIT_MEASURE VARCHAR(5) DEFAULT 'мкм',
    DESCRIPTION VARCHAR(255),
    STATION_ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into units (ID, UNIT_NUMBER, TYPE, STATION_ID) values
    (1, 3, 'СВ 477/180-16 УХЛ4', 1),
    (2, 7, 'СВ 1548/203-66 УХЛ4', 4),
    (3, 4, 'СВ 477/180-16 УХЛ4', 1),
    (4, 8, 'СВ 1488/175-88 УХЛ4', 2),
    (5, 2, 'СВ 1488/175-88 УХЛ4', 2),
    (6, 2, 'СВ 1488/200-88 УХЛ4', 3),
    (7, 1, 'СВ 1345/145-96 УХЛ4', 6),
    (8, 1, 'Без названия', 5);

-- Создаем таблицу плоскостей PLANES и заполняем
create TABLE IF NOT EXISTS planes (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NUMBER INTEGER DEFAULT 1,
    UNIT_ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into planes (NUMBER, UNIT_ID) values
    (1, 1), (1, 2), (1, 3), (1, 4),
    (1, 5), (1, 6), (1, 7);

-- Создаем таблицу грузов WEIGHTS и заполняем
create TABLE IF NOT EXISTS weights (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    PLANE_ID BIGINT NOT NULL,
    RUN INTEGER NOT NULL DEFAULT 0,
    REFERENCE BIGINT NOT NULL DEFAULT -1,
    MAG_WEIGHT DOUBLE PRECISION NOT NULL DEFAULT 0,
    PHASE_WEIGHT DOUBLE PRECISION NOT NULL DEFAULT 0,
    UNIT_ID BIGINT NOT NULL,
    SYSTEM_INFORMATION VARCHAR(255),
    IS_TARGET BOOLEAN NOT NULL DEFAULT TRUE,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into weights (ID, PLANE_ID, RUN, REFERENCE,
    MAG_WEIGHT, PHASE_WEIGHT, UNIT_ID) values
    (1, 1, 0, -1, 0, 0, 1),
    (2, 1, 1, -1, 4.8, -135, 1),
    (3, 1, 2, -1, 15.4, -135, 1),
    (4, 1, 3, -1, 36.4, -135, 1),
    (5, 1, 4, -1, 37, 180, 1),
    (6, 1, 0, -1, 0, 0, 2),
    (7, 1, 1, -1, 250, 0, 2),
    (8, 1, 0, -1, 0, 0, 7),
    (9, 1, 0, 8, 30, 0, 7),
    (10, 1, 0, 8, 100, 100, 7),
    (11, 1, 0, 8, 50, -90, 7),
    (12, 1, 0, 10, 60, 90, 7),
    (13, 1, 0, 9, 21.2132, 135, 7),
    (14, 1, 0, 12, 21.2132, 0, 7),
    (15, 1, 0, -1, 36.5, -135, 7);

-- Создаем таблицу мест измерения вибрации POINTS и заполняем
create TABLE IF NOT EXISTS points (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
	NAME VARCHAR(255) NOT NULL DEFAULT 'ГП',
	UNIT_ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into points (ID, NAME, UNIT_ID) values
    (1, 'ВГП', 1), (2, 'НГП', 1), (3, 'ТП', 1),
    (4, 'ВГП', 2), (5, 'ВГП', 3), (6, 'ВГП', 4),
    (7, 'ВГП', 5), (8, 'ВГП', 6), (9, 'Место', 7);

-- Создаем таблицу режимов работы агрегата MODES и заполняем
create TABLE IF NOT EXISTS modes (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
	NAME VARCHAR(20) NOT NULL DEFAULT '100%n',
	UNIT_ID BIGINT NOT NULL,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into modes (ID, NAME, UNIT_ID) values
    (1, '100%n', 1), (2, '100%n', 2), (3, '100%n', 3), (4, '100%n', 4),
    (5, '100%n', 5), (6, '100%n', 6), (7, '100%n', 7), (8, '100%U', 1),
    (9, '40МВт', 1), (10, '100%n', 2), (11, '100%U', 2),  (12, '333МВт', 2);

-- Создаем таблицу записей вибрации RECORDS и заполняем
create TABLE IF NOT EXISTS records (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY,
    POINT_ID BIGINT NOT NULL,
    MODE_ID BIGINT NOT NULL,
    WEIGHT_ID BIGINT NOT NULL,
    MAG_VIBRATION DOUBLE PRECISION NOT NULL DEFAULT 0,
    PHASE_VIBRATION DOUBLE PRECISION NOT NULL DEFAULT 0,
    IS_USED BOOLEAN NOT NULL DEFAULT TRUE,
    IS_MANUAL_SENSITIVITY BOOLEAN NOT NULL DEFAULT FALSE,
    MAG_SENSITIVITY DOUBLE PRECISION DEFAULT 0,
    PHASE_SENSITIVITY DOUBLE PRECISION DEFAULT 0,
    CREATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP(6) DEFAULT CURRENT_TIMESTAMP,
    VERSION BIGINT DEFAULT 1,
    PRIMARY KEY (ID)
);

insert into records (POINT_ID, MODE_ID, WEIGHT_ID, MAG_VIBRATION,
    PHASE_VIBRATION) values
    (4, 2, 6, 183, 51),
    (4, 11, 6, 350, 52),
    (4, 12, 6, 362, 68),
    (4, 2, 7, 13, 331),
    (4, 11, 7, 123, 41),
    (4, 12, 7, 209, 74),

    (9, 7, 8, 100, -30),
    (9, 7, 9, 126.8706, -23.21),
    (9, 7, 10, 84.5237, 35),
    (9, 7, 11, 132.2876, -49.1066),
    (9, 7, 12, 39.3918, 75.0694),
    (9, 7, 13, 107.462, -19.0078),
    (9, 7, 14, 88.882, -13.0039),

    (1, 8, 1, 400, 174),
    (1, 1, 1, 249, 190),
    (1, 8, 1, 310, 189),
    (1, 9, 1, 312, 189),
    (1, 1, 2, 240, 189),
    (1, 8, 2, 288, 190),
    (1, 9, 2, 278, 192),
    (1, 1, 3, 209, 192),
    (1, 8, 3, 248, 192),
    (1, 9, 3, 244, 194),
    (1, 1, 4, 120, 191),
    (1, 8, 4, 156, 184),
    (1, 9, 4, 147, 193),
    (1, 1, 15, 199, 166),
    (1, 8, 15, 260, 162),
    (1, 9, 15, 196, 177),
    (1, 1, 5, 228, 208),
    (1, 8, 5, 273, 204),
    (1, 9, 5, 259, 207);